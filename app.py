import streamlit as st

# ==========================================
# 1. ç³»çµ±è¨­å®š (æ¡ƒåœ’å°ˆå±¬ç‰ˆ)
# ==========================================
st.set_page_config(
    page_title="ä¸‰ä¸€å”æœƒå°ˆå±¬ç¦åˆ©ç³»çµ±", # ç¶²é æ¨™ç±¤ä¹Ÿæ”¹äº†
    page_icon="ğŸ‘µ",
    layout="centered",
    initial_sidebar_state="collapsed"
)

# ==========================================
# ğŸ”’ ç™»å…¥é©—è­‰ (å…§éƒ¨è¨“ç·´å°ˆç”¨æ¨¡å¼)
# ==========================================
if "authenticated" not in st.session_state:
    st.session_state.authenticated = False

if not st.session_state.authenticated:
    # --- ğŸ›¡ï¸ é€™è£¡åšäº†æˆ°ç•¥æ€§ä¿®æ”¹ ---
    st.title("ğŸ”’ ä¸‰ä¸€å”æœƒå°ˆå±¬æœƒå“¡ç¦åˆ©")
    st.markdown("### âš ï¸ æœ¬ç³»çµ±åƒ…ä¾›æœƒå“¡ä½¿ç”¨")
    st.caption("éå…¬é–‹è³‡è¨Šï¼Œå¯†ç¢¼è«‹å‘ä¸‰ä¸€å”æœƒç´¢å–")
    
    password_input = st.text_input("è«‹è¼¸å…¥æˆæ¬Šç¢¼:", type="password")
    
    if st.button("ç™»å…¥ç³»çµ±"):
        if password_input == "1234":
            st.session_state.authenticated = True
            st.rerun()  # å¯†ç¢¼æ­£ç¢ºï¼Œé‡æ–°æ•´ç†é€²å…¥ä¸»ç•«é¢
        else:
            st.error("æˆæ¬Šç¢¼éŒ¯èª¤ï¼Œè«‹è¯ç¹«å”æœƒç®¡ç†å“¡ âŒ")
            
    st.stop()  # â›” ç†”æ–·æ©Ÿåˆ¶ï¼šæœªç™»å…¥å‰åœæ­¢åŸ·è¡Œ

# ==========================================
# (ä»¥ä¸‹å…§å®¹åªæœ‰ç™»å…¥å¾Œæ‰æœƒé¡¯ç¤º)
# ==========================================

# CSS: å¤§å­—é«”ã€æ¸…æ™°å¡ç‰‡
st.markdown("""
    <style>
    html, body, [class*="css"] {
        font-family: "Microsoft JhengHei", sans-serif;
        font-size: 20px;
    }
    .big-money {
        font-size: 24px;
        color: #C2185B; /* æ¡ƒç´…è‰² */
        font-weight: bold;
    }
    .benefit-item {
        border-bottom: 1px solid #ddd;
        padding: 10px 0;
    }
    </style>
""", unsafe_allow_html=True)

# ==========================================
# 2. æ¨™é¡Œèˆ‡è¼¸å…¥ (å…§éƒ¨æ•™æè¦–è§’)
# ==========================================
st.title("ğŸ‘µ ä¸‰ä¸€å”æœƒ kalas ç¦åˆ©è©¦ç®—æ•™æ")
st.caption("âœ… å¿—å·¥å°ˆç”¨ï¼šå”åŠ©æ¡ƒåœ’åŸä½æ°‘é•·è€…è©¦ç®—ç·´ç¿’")

# åŠ å…¥ç™»å‡ºæŒ‰éˆ•
if st.button("ğŸ”’ çµæŸè¨“ç·´ (ç™»å‡º)", type="secondary"):
    st.session_state.authenticated = False
    st.rerun()

with st.expander("ğŸ“ æ¡ˆä¾‹æ¢ä»¶è¨­å®š (é»æ­¤å±•é–‹)", expanded=True):
    age = st.number_input("é•·è¼©å¹´é½¡ (Mihecaan)", 50, 120, 55)
    
    c1, c2 = st.columns(2)
    with c1:
        is_farmer = st.checkbox("å…·æœ‰è¾²ä¿èº«åˆ†")
        is_low_income = st.checkbox("åˆ—å†Šä¸­ä½æ”¶å…¥æˆ¶")
        has_disability = st.checkbox("é ˜æœ‰èº«éšœæ‰‹å†Š")
    with c2:
        is_owner = st.checkbox("è‡ªæœ‰ä½å®… (æ¡ƒåœ’)")
        is_renter = st.checkbox("ç§Ÿè³ƒæˆ¿å±‹")
        has_car = st.checkbox("åä¸‹æœ‰æ±½è»Š")
        grandparenting = st.checkbox("å”åŠ©ç…§é¡§å­«å­å¥³")

# ==========================================
# 3. æ ¸å¿ƒé¡¯ç¤ºå‡½æ•¸
# ==========================================
def show_item(index, name, money, qualify, note, location):
    if qualify:
        icon = "âœ…"
        status = "ç¬¦åˆè³‡æ ¼"
    else:
        icon = "ğŸ”’"
        status = "æœªç¬¦æ¢ä»¶"

    with st.container(border=True):
        st.write(f"**{index}. {icon} {name}**")
        if qualify:
            st.markdown(f'<div class="big-money">{money}</div>', unsafe_allow_html=True)
            st.info(f"ğŸ’¡ {note}")
            st.caption(f"ğŸ›ï¸ æ‰¿è¾¦å–®ä½ï¼š{location}")
        else:
            st.caption(f"âŒ {status} ({note})")

# ==========================================
# 4. æ¡ƒåœ’ç¦åˆ©å¤§æ¸…å–® (33é …)
# ==========================================
st.markdown("---")
tabs = st.tabs(["ğŸ’°é ˜éŒ¢", "ğŸ©ºé†«ç™‚", "ğŸ ç”Ÿæ´»", "ğŸšŒäº¤é€š", "âš°ï¸éš±è—ç‰ˆ"])

# === Tab 1: ç¾é‡‘æ´¥è²¼ ===
with tabs[0]:
    st.subheader("ğŸ’° ç¾é‡‘æ´¥è²¼è©¦ç®—")
    show_item(1, "æ¡ƒåœ’è€äººä¸‰ç¯€ç¦®é‡‘", "$2,500/æ¯ç¯€ (å¹´é ˜$7,500)", (age>=55), "åŸä½æ°‘55æ­²è¨­ç±æ»¿6å€‹æœˆ", "å€å…¬æ‰€ç¤¾æœƒèª²")
    show_item(2, "æ¡ƒåœ’é‡é™½æ•¬è€é‡‘", "$2,500/å¹´", (age>=55), "åŸä½æ°‘55æ­² (ä¸€èˆ¬65æ­²)", "å€å…¬æ‰€ç¤¾æœƒèª²")
    show_item(3, "åŸä½æ°‘çµ¦ä»˜ (åœ‹ä¿)", "$4,049/æœˆ", (55<=age<65), "55-64æ­²å°ˆå±¬ (èˆ‡è€è¾²äº’æ–¥)", "å€å…¬æ‰€åŸæ°‘èª²")
    show_item(4, "è€è¾²æ´¥è²¼", "$8,110/æœˆ", (is_farmer and age>=65), "è¾²ä¿å¹´è³‡æ»¿15å¹´", "åœ°å€è¾²æœƒ")
    show_item(5, "æ¡ƒåœ’åŸæ°‘æ€¥é›£æ•‘åŠ©", "æœ€é«˜3è¬", True, "æ„å¤–/é‡ç—…/æ­»äº¡ (3å€‹æœˆå…§ç”³è«‹)", "å€å…¬æ‰€åŸæ°‘èª²")
    show_item(6, "å¼±å‹¢å…’å°‘æ‰˜è‚²(éš”ä»£)", "$3,000èµ·/æœˆ", (grandparenting and is_low_income), "ç¥–çˆ¶æ¯ç…§é¡§å­«å­å¥³è£œåŠ©", "å€å…¬æ‰€ç¤¾æœƒèª²")

# === Tab 2: é†«ç™‚ ===
with tabs[1]:
    st.subheader("ğŸ©º é†«ç™‚è£œåŠ©è©¦ç®—")
    show_item(7, "æ¡ƒåœ’åŸæ°‘å‡ç‰™è£œåŠ©", "æœ€é«˜4.4è¬", (age>=55), "éœ€å…ˆè‡³è¨ºæ‰€ä¼°åƒ¹", "å€å…¬æ‰€åŸæ°‘èª²")
    show_item(8, "å¥ä¿è²»å…¨é¡è£œåŠ©", "å…¨å…", (age>=55), "55-64æ­²åŸä½æ°‘ (ç³»çµ±è‡ªå‹•æ¸›å…)", "å¥ä¿å±€")
    show_item(9, "æˆäººå¥åº·æª¢æŸ¥", "å…è²»", (age>=55), "æ¯å¹´ä¸€æ¬¡ (åŸä½æ°‘ææ—©è‡³55æ­²)", "è¡›ç”Ÿæ‰€/ç‰¹ç´„é†«é™¢")
    show_item(10, "èº«éšœè¼”å…·è£œåŠ©", "å…¨é¡/éƒ¨åˆ†", has_disability, "åŠ©è½å™¨/æ°£å¢ŠåºŠç­‰", "å€å…¬æ‰€ç¤¾æœƒèª²")

# === Tab 3: ä½å±‹ ===
with tabs[2]:
    st.subheader("ğŸ  å±…ä½ç¦åˆ©è©¦ç®—")
    show_item(11, "æ¡ƒåœ’ä¿®ç¹•ä½å®…è£œåŠ©", "æœ€é«˜15è¬", is_owner, "å±‹é ‚/è¡›æµ´ä¿®ç¹• (éœ€è‡ªæœ‰)", "å€å…¬æ‰€åŸæ°‘èª²")
    show_item(12, "æ¡ƒåœ’å»ºè³¼ä½å®…è£œåŠ©", "æœ€é«˜22è¬", is_owner, "è³¼è²·æˆ–è‡ªå»ºæˆ¿å±‹", "å€å…¬æ‰€åŸæ°‘èª²")
    show_item(13, "ç§Ÿé‡‘è£œè²¼ (300å„„)", "ä¾ç­‰ç´š ($3000èµ·)", is_renter, "ç§Ÿå±‹è€…å¯ç”³è«‹", "ç‡Ÿå»ºç½²ç·šä¸Šç”³è«‹")
    show_item(14, "ä½å®¿å¼æ©Ÿæ§‹è£œåŠ©", "æœ€é«˜12è¬/å¹´", True, "å…¥ä½æ©Ÿæ§‹ä½¿ç”¨è€…", "ç¤¾æœƒå±€")

# === Tab 4: äº¤é€š ===
with tabs[3]:
    st.subheader("ğŸšŒ äº¤é€šå„ªæƒ è©¦ç®—")
    show_item(15, "æ¡ƒåœ’æ•¬è€æ„›å¿ƒå¡", "800é»/æœˆ", (age>=55), "åŸä½æ°‘55æ­²å¯è¾¦ç† (å¾©èˆˆå€1000é»)", "å€å…¬æ‰€")
    show_item(16, "æ„›å¿ƒè¨ˆç¨‹è»Š", "é»æ•¸æŠ˜æŠµ", (age>=55), "å–®è¶Ÿ100å…ƒä»¥ä¸‹è£œ36é»", "å„å¤§è»ŠéšŠ")
    show_item(17, "æ©Ÿæ·/å…¬è»Šå„ªæƒ ", "5æŠ˜/å…è²»", (age>=55), "ä½¿ç”¨å¸‚æ°‘å¡æ‰£é»", "æ·é‹/å…¬è»Š")
    show_item(18, "å°éµæ­ä¹˜è£œåŠ©", "æ¯è¶Ÿæ‰£é»", (age>=55), "èµ·è¨–ç«™éœ€åœ¨æ¡ƒåœ’å¸‚å…§ (æ¯è¶Ÿ30é»)", "ç«è»Šç«™")

# === Tab 5: éš±è—ç‰ˆ ===
with tabs[4]:
    st.subheader("âš°ï¸ å…¶ä»–æ¬Šç›Šè©¦ç®—")
    show_item(19, "è¾²ä¿å–ªè‘¬æ´¥è²¼", "$153,000", is_farmer, "è¾²æ°‘èº«æ•… (ç”±å®¶å±¬è«‹é ˜)", "è¾²æœƒä¿éšªéƒ¨")
    show_item(20, "åœ‹ä¿å–ªè‘¬çµ¦ä»˜", "ç´„9.8è¬", (not is_farmer), "ä¸€èˆ¬åœ‹ä¿èº«æ•… (ç”±å®¶å±¬è«‹é ˜)", "å‹ä¿å±€")
    show_item(21, "åŸä½æ°‘æ³•å¾‹æ‰¶åŠ©", "å¾‹å¸«è²»å…¨å…", True, "è¨´è¨Ÿ/æ³•å¾‹è«®è©¢", "æ³•æ‰¶åŸºé‡‘æœƒ")
    show_item(22, "æ„å¤–ä¿éšª (å¾®å‹)", "æœ€é«˜30è¬", is_low_income, "å¸‚åºœä»£ç‚ºæŠ•ä¿", "ç¤¾æœƒå±€")
    show_item(23, "ä½¿ç”¨ç‰Œç…§ç¨…æ¸›å…", "å…ç¨… (1.1è¬)", (has_disability and has_car), "èº«éšœè€…åä¸‹è»Šè¼›", "ç¨…å‹™å±€")

# ==========================================
# 5. åº•éƒ¨è¯çµ¡å€
# ==========================================
st.markdown("---")
st.subheader("ğŸ“ è«®è©¢çª—å£")
c1, c2 = st.columns(2)
with c1:
    st.markdown("**æ¡ƒåœ’å¸‚ç›¸é—œè¡Œæ”¿å–®ä½**")
    st.markdown("**æ•™æè¨­è¨ˆ**ï¼šä¸‰ä¸€å”æœƒ")
with c2:
    st.markdown("**é•·ç…§å°ˆç·š**ï¼š1966")
    st.markdown("**å¸‚æ°‘å°ˆç·š**ï¼š1999")

st.caption("âš ï¸ æœ¬ç³»çµ±åƒ…ä¾›å…§éƒ¨æ•™å­¸ä½¿ç”¨ï¼Œå¯¦éš›è³‡æ ¼ä»¥æ”¿åºœæ©Ÿé—œæ ¸å®šç‚ºæº–ã€‚")



